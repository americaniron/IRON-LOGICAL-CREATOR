<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://esm.sh; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob: https:; media-src 'self' data: blob: https:; connect-src 'self' https://generativelanguage.googleapis.com https://api.openai.com https://api.x.ai; shadow-root 'self';">
    <title>IRON MEDIA - Site Orchestrator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react/": "https://esm.sh/react@18.2.0/",
    "react-dom": "https://esm.sh/react-dom@18.2.0",
    "react-dom/": "https://esm.sh/react-dom@18.2.0/",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime",
    "@google/genai": "https://esm.sh/@google/genai@1.37.0"
  }
}
</script>
<script>
  // POLYFILL: Ensure 'process' exists for modules that rely on it
  window.process = window.process || { env: { NODE_ENV: 'development' } };
</script>
<style>
  :root {
    --heavy-yellow: #FFC20E;
    --safety-orange: #F97316;
    --asphalt: #111317;
    --steel: #23272F;
    --industrial-gray: #4A515A;
    --text-light: #EAEAEA;
    --text-muted: #88929E;
    
    --guest-green: #22c55e;
    --grok-magenta: #d946ef;

    --font-heading: 'Black Ops One', sans-serif;
    --font-body: 'Share Tech Mono', monospace;
  }
  
  body {
    font-family: var(--font-body);
    background-color: var(--asphalt);
    color: var(--text-muted);
    overflow: hidden;
    position: relative;
    margin: 0;
  }

  .blueprint-grid {
    background-color: var(--asphalt);
    background-image: 
        linear-gradient(rgba(74, 81, 90, 0.2) 1px, transparent 1px), 
        linear-gradient(90deg, rgba(74, 81, 90, 0.2) 1px, transparent 1px);
    background-size: 25px 25px;
  }
  
  #root {
    height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .control-panel {
    background-color: rgba(35, 39, 47, 0.9);
    border: 2px solid #000;
    border-top-color: var(--industrial-gray);
    border-left-color: var(--industrial-gray);
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 2px 5px rgba(0,0,0,0.3);
  }

  .monitor-screen {
    background-color: rgba(17, 19, 23, 0.95);
    border: 1px solid var(--industrial-gray);
    backdrop-filter: blur(4px);
    box-shadow: inset 0 0 40px rgba(0,0,0,0.9);
    position: relative;
  }
  
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: var(--heavy-yellow) var(--asphalt);
  }

  .scrollbar-thumb-guest-green::-webkit-scrollbar-thumb { background-color: var(--guest-green); }
  .scrollbar-thumb-grok-magenta::-webkit-scrollbar-thumb { background-color: var(--grok-magenta); }
  
  .animate-in { 
    animation: slide-up-fade 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; 
  }

  .focus-ring:focus, .focus-ring:focus-within {
    outline: 2px solid var(--heavy-yellow);
    outline-offset: 2px;
  }
  
  @keyframes slide-up-fade {
    0% { opacity: 0; transform: translateY(15px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
  }

  #boot-screen {
    transition: opacity 0.5s ease;
  }

  .caution-stripes {
    background-image: repeating-linear-gradient(
      45deg,
      var(--heavy-yellow),
      var(--heavy-yellow) 10px,
      #000 10px,
      #000 20px
    );
  }

  .rivet {
      width: 8px; height: 8px; background: #000; border: 1px solid var(--industrial-gray); border-radius: 50%;
      box-shadow: inset 0 1px 1px rgba(255,255,255,0.2);
  }
</style>
</head>
  <body class="text-gray-300">
    <div id="root">
        <div id="boot-screen" style="position: fixed; inset: 0; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #111317; font-family: 'Black Ops One', sans-serif; color: #FFC20E; text-transform: uppercase; letter-spacing: 0.5em; gap: 20px;">
            <div style="font-size: 2.5rem; font-weight: 900; text-shadow: 0 0 20px #FFC20E;">IRON MEDIA</div>
            <div id="boot-status" style="font-size: 0.8rem; color: #88929E; letter-spacing: 0.2em;">SYSTEM_BOOT_SEQUENCE...</div>
            <div id="error-log" style="font-size: 0.7rem; color: #ef4444; margin-top: 20px; white-space: pre-wrap; max-width: 80%; text-align: center; letter-spacing: normal;"></div>
        </div>
    </div>

    <script>
      window.onerror = function(message, source, lineno, colno, error) {
        console.error("Global Error Caught:", message);
        const errorLog = document.getElementById('error-log');
        const bootStatus = document.getElementById('boot-status');
        if (errorLog) {
          errorLog.textContent = `CRITICAL BOOT FAILURE:\n${message}\nSource: ${source}:${lineno}`;
          if (bootStatus) bootStatus.textContent = "BOOT_HALTED";
        }
      };
      
      // FAILSAFE: Force remove boot screen if React fails to mount within 3 seconds
      setTimeout(() => {
        const bootScreen = document.getElementById('boot-screen');
        if (bootScreen && bootScreen.style.opacity !== '0' && bootScreen.style.display !== 'none') {
            console.warn("BOOT_TIMEOUT: Forcing boot screen removal via failsafe.");
            bootScreen.style.opacity = '0';
            setTimeout(() => {
                if(bootScreen) bootScreen.style.display = 'none';
            }, 500);
        }
      }, 3000);
    </script>
    <script type="module" src="./index.tsx" onerror="window.onerror('Failed to load module ./index.tsx', 'index.html', 0, 0, null)"></script>
  </body>
</html>