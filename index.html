<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://esm.sh; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' data: https://fonts.gstatic.com; img-src 'self' data: blob: https:; media-src 'self' data: blob: https:; connect-src 'self' https://generativelanguage.googleapis.com https://api.openai.com https://api.x.ai;">
    <title>IRON MEDIA - Site Orchestrator</title>
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react/": "https://esm.sh/react@18.2.0/",
    "react-dom": "https://esm.sh/react-dom@18.2.0",
    "react-dom/": "https://esm.sh/react-dom@18.2.0/",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime",
    "@google/genai": "https://esm.sh/@google/genai@0.2.1"
  }
}
</script>
<script>
  // POLYFILL: Ensure 'process' exists for modules that rely on it
  window.process = window.process || { env: { NODE_ENV: 'development' } };
</script>
</head>
  <body class="text-gray-300">
    <div id="root">
        <div id="boot-screen" style="position: fixed; inset: 0; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #111317; font-family: 'Black Ops One', sans-serif; color: #FFC20E; text-transform: uppercase; letter-spacing: 0.5em; gap: 20px;">
            <div style="font-size: 2.5rem; font-weight: 900; text-shadow: 0 0 20px #FFC20E;">IRON MEDIA</div>
            <div id="boot-status" style="font-size: 0.8rem; color: #88929E; letter-spacing: 0.2em;">SYSTEM_BOOT_SEQUENCE...</div>
            <div id="error-log" style="font-size: 0.7rem; color: #ef4444; margin-top: 20px; white-space: pre-wrap; max-width: 80%; text-align: center; letter-spacing: normal;"></div>
        </div>
    </div>

    <script>
      window.onerror = function(message, source, lineno, colno, error) {
        console.error("Global Error Caught:", message);
        const errorLog = document.getElementById('error-log');
        const bootStatus = document.getElementById('boot-status');
        if (errorLog) {
          errorLog.textContent = `CRITICAL BOOT FAILURE:\n${message}\nSource: ${source}:${lineno}`;
          if (bootStatus) bootStatus.textContent = "BOOT_HALTED";
        }
      };
      
      // FAILSAFE: Force remove boot screen if React fails to mount within 2 seconds (NON-NEGOTIABLE REQUIREMENT)
      setTimeout(() => {
        const bootScreen = document.getElementById('boot-screen');
        if (bootScreen && bootScreen.style.opacity !== '0' && bootScreen.style.display !== 'none') {
            console.warn("BOOT_TIMEOUT: Forcing boot screen removal via 2-second failsafe.");
            const bootStatus = document.getElementById('boot-status');
            if (bootStatus) bootStatus.textContent = "FAILSAFE_ENGAGED";
            bootScreen.style.opacity = '0';
            setTimeout(() => {
                if(bootScreen) bootScreen.style.display = 'none';
            }, 500);
        }
      }, 2000); // Changed from 3000ms to 2000ms per requirements
    </script>
    <script type="module" src="./index.tsx" onerror="window.onerror('Failed to load module ./index.tsx', 'index.html', 0, 0, null)"></script>
  </body>
</html>